set(KVSTORE_TEST_LIBS
    kvstore_lib
    meta_client_lib
    stats_lib
    time_lib
    meta_thrift_lib
    common_thrift_lib
    raftex_lib
    raftex_thrift_lib
    wal_lib
    base_lib
    thread_lib
    fs_lib
    schema_lib
    network_lib
    thrift_lib
    time_lib
    gflags_man_lib
    kvstore_storage_utils_lib
)

nebula_add_test(
    NAME
        part_test
    SOURCES
        PartTest.cpp
    LIBRARIES
        ${KVSTORE_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        rocks_engine_test
    SOURCES
        RocksEngineTest.cpp
    LIBRARIES
        ${KVSTORE_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        nebula_store_test
    SOURCES
        NebulaStoreTest.cpp
    LIBRARIES
        ${KVSTORE_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        rocks_engine_config_test
    SOURCES
        RocksEngineConfigTest.cpp
        ../RocksEngine.cpp
        ../RocksEngineConfig.cpp
    LIBRARIES
        raftex_lib
        raftex_thrift_lib
        wal_lib
        base_lib
        thread_lib
        fs_lib
        network_lib
        thrift_lib
        time_lib
        kvstore_storage_utils_lib
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        wangle
        gtest
)


nebula_add_test(
    NAME
        log_encoder_test
    SOURCES
        LogEncoderTest.cpp
    LIBRARIES
        ${KVSTORE_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        snapshot_link_test
    SOURCES
        SnapshotLinkTest.cpp
    LIBRARIES
        ${KVSTORE_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        wangle
        gtest
)

nebula_add_executable(
    NAME
        multi_versions_perf_test_bm
    SOURCES
        MultiVersionBenchmark.cpp
    LIBRARIES
        base_lib
        fs_lib
        ${ROCKSDB_LIBRARIES}
        follybenchmark
        boost_regex
)

nebula_add_executable(
    NAME
        part_performance_test
    SOURCES
        PartPerformanceTest.cpp
    LIBRARIES
        ${KVSTORE_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        follybenchmark
        wangle
        gtest
        boost_regex
)
