set(meta_test_deps
    meta_client_lib
    meta_service_handler_lib
    ws_common_lib
    http_client_lib
    gflags_man_lib
    raftex_thrift_lib
    storage_thrift_lib
    meta_thrift_lib
    common_thrift_lib
    thrift_lib
    raftex_lib
    wal_lib
    kvstore_lib
    process_lib
    schema_lib
    stats_lib
    fs_lib
    time_lib
    network_lib
    thread_lib
    base_lib
    kvstore_storage_utils_lib
)

nebula_add_test(
    NAME
        meta_utils_test
    SOURCES
        MetaServiceUtilsTest.cpp
        ../MetaServiceUtils.cpp
    LIBRARIES
        meta_thrift_lib
        common_thrift_lib
        thrift_lib
        base_lib
        fs_lib
        network_lib
        thread_lib
        ${THRIFT_LIBRARIES}
        gtest
)

nebula_add_test(
    NAME
        processor_test
    SOURCES
        ProcessorTest.cpp
    LIBRARIES
        index_lib
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        hb_processor_test
    SOURCES
        HBProcessorTest.cpp
    LIBRARIES
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        meta_client_test
    SOURCES
        MetaClientTest.cpp
    LIBRARIES
        meta_gflags_man_lib
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        config_man_test
    SOURCES
        ConfigManTest.cpp
    LIBRARIES
        storage_client_lib
        meta_gflags_man_lib
        storage_service_handler_lib
        adHocSchema_lib
        adHocIndex_lib
        dataman_lib
        filter_lib
        index_lib
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        active_hosts_man_test
    SOURCES
        ActiveHostsManTest.cpp
    LIBRARIES
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        meta_http_download_test
    SOURCES
        MetaHttpDownloadHandlerTest.cpp
    LIBRARIES
        storage_http_handler_lib
        meta_http_handler_lib
        ws_lib
        ws_common_lib
        hdfs_helper_lib
        http_client_lib
        ${meta_test_deps}
        proxygenhttpserver
        proxygenlib
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        meta_http_ingest_test
    SOURCES
        MetaHttpIngestHandlerTest.cpp
    LIBRARIES
        storage_http_handler_lib
        meta_http_handler_lib
        ws_lib
        ws_common_lib
        hdfs_helper_lib
        http_client_lib
        ${meta_test_deps}
        proxygenhttpserver
        proxygenlib
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)
nebula_add_test(
    NAME
        balancer_test
    SOURCES
        BalancerTest.cpp
    LIBRARIES
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)


nebula_add_test(
    NAME
        balance_integration_test
    SOURCES
        BalanceIntegrationTest.cpp
    LIBRARIES
        index_lib
        storage_service_handler_lib
        storage_client_lib
        dataman_lib
        filter_lib
        adHocSchema_lib
        adHocIndex_lib
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)


nebula_add_test(
    NAME
        admin_client_test
    SOURCES
        AdminClientTest.cpp
    LIBRARIES
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)


nebula_add_test(
    NAME
        authentication_test
    SOURCES
        AuthProcessorTest.cpp
    LIBRARIES
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        cluster_id_man_test
    SOURCES
        ClusterIdManTest.cpp
    LIBRARIES
        ${meta_test_deps}
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        meta_http_replace_test
    SOURCES
        MetaHttpReplaceHandlerTest.cpp
    LIBRARIES
        storage_http_handler_lib
        meta_http_handler_lib
        ws_lib
        ws_common_lib
        hdfs_helper_lib
        http_client_lib
        ${meta_test_deps}
        proxygenhttpserver
        proxygenlib
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

nebula_add_test(
    NAME
        job_manager_test
    SOURCES
        JobManagerTest.cpp
    LIBRARIES
        meta_http_handler_lib
        ws_lib
        ws_common_lib
        http_client_lib
        charset_lib
        gflags_man_lib
        ${meta_test_deps}
        proxygenhttpserver
        proxygenlib
        ${ROCKSDB_LIBRARIES}
        ${THRIFT_LIBRARIES}
        wangle
        gtest
)

