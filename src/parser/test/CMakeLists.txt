set(PARSER_TEST_LIBS
    parser_lib
    filter_lib
    network_lib
    fs_lib
    time_lib
    gflags_man_lib
    schema_lib
    meta_client_lib
    stats_lib
    time_lib
    meta_thrift_lib
    storage_client_lib
    storage_thrift_lib
    common_thrift_lib
    thrift_lib
    thread_lib
    base_lib
)

nebula_add_test(
    NAME
        parser_test
    SOURCES
        ParserTest.cpp
    LIBRARIES
        ${PARSER_TEST_LIBS}
        gtest
        gtest_main
        ${THRIFT_LIBRARIES}
        wangle
)

nebula_add_test(
    NAME
        scanner_test
    SOURCES
        ScannerTest.cpp
    LIBRARIES
        ${PARSER_TEST_LIBS}
        gtest
        gtest_main
        ${THRIFT_LIBRARIES}
        wangle
)

nebula_add_executable(
    NAME
        parser_bm
    SOURCES
        ParserBenchmark.cpp
    LIBRARIES
        ${PARSER_TEST_LIBS}
        follybenchmark
        boost_regex
        ${THRIFT_LIBRARIES}
        wangle
)

if(ENABLE_FUZZ_TEST)
    nebula_add_subdirectory(fuzzing)
endif()
