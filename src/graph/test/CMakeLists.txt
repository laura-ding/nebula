set(GRAPH_TEST_LIBS
    graph_lib
    graph_thrift_lib
    kvstore_storage_utils_lib
    storage_service_handler_lib
    storage_client_lib
    storage_thrift_lib
    common_thrift_lib
    parser_lib
    filter_lib
    schema_lib
    index_lib
    dataman_lib
    http_client_lib
    ws_common_lib
    storage_client_lib
    meta_client_lib
    meta_thrift_lib
    meta_service_handler_lib
    kvstore_lib
    raftex_lib
    raftex_thrift_lib
    wal_lib
    time_lib
    fs_lib
    network_lib
    thread_lib
    thrift_lib
    process_lib
    base_lib
    meta_gflags_man_lib
    gflags_man_lib
    ws_common_lib
    stats_lib
    charset_lib
    encryption_lib
    session_lib
    permission_lib
)

set(GRAPH_TEST_CLIENT_LIBS
    graph_test_common_lib
    client_cpp_lib
    adHocSchema_lib
    adHocIndex_lib
)

nebula_add_all_library(
    graph_test_common
    TestMain.cpp
    TestEnv.cpp
    TestBase.cpp
)

nebula_add_test(
    NAME
        session_manager_test
    SOURCES
        SessionManagerTest.cpp
    LIBRARIES
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
        gtest_main
)

nebula_add_test(
    NAME
        query_engine_test
    SOURCES
        SchemaTest.cpp
        ConfigTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        go_test
    SOURCES
        GoTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        data_test
    SOURCES
        DataTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        order_by_test
    SOURCES
        OrderByTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        fetch_vertices_test
    SOURCES
        FetchVerticesTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        fetch_edges_test
    SOURCES
        FetchEdgesTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        set_test
    SOURCES
        SetTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        delete_vertices_sentence_test
    SOURCES
        DeleteVerticesTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        delete_edges_sentence_test
    SOURCES
        DeleteEdgesTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        update_test
    SOURCES
        UpdateTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        find_path_test
    SOURCES
        FindPathTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        group_by_limit_test
    SOURCES
        GroupByLimitTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        yield_test
    SOURCES
        YieldTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        geo_test
    SOURCES
        GeoTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        snapshot_command_test
    SOURCES
        SnapshotCommandTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        index_test
    SOURCES
        IndexTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        lookup_test
    SOURCES
        LookupTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
    charsetCollate_test
    SOURCES
        CharsetCollateTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        user_test
    SOURCES
        UserTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        permission_test
    SOURCES
        PermissionTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)

nebula_add_test(
    NAME
        ttl_test
    SOURCES
        TTLTest.cpp
    LIBRARIES
        ${GRAPH_TEST_CLIENT_LIBS}
        ${GRAPH_TEST_LIBS}
        ${THRIFT_LIBRARIES}
        ${ROCKSDB_LIBRARIES}
        proxygenlib
        wangle
        gtest
)
